ID: TC01  
Название: Успешная оплата банковской картой (хэппи-пас)  
Предусловия:  
- Пользователь авторизован и имеет товар в корзине.  
- Сумма заказа отображена корректно.  
- Тестовый платёжный шлюз настроен на возврат «Успешно».  
Шаги:  
1. Открыть страницу оформления заказа.  
2. Ввести корректный номер карты (например, 4111 1111 1111 1111).  
3. Указать валидную дату истечения срока (MM/YY > текущей даты).  
4. Ввести корректный CVC.  
5. Нажать кнопку «Оплатить».  
Ожидаемый результат:  
- Клиентская валидация проходит без ошибок.  
- Запрос отправлен в платёжный шлюз с корректными полями.  
- Платёжный шлюз возвращает «Успешно».  
- Состояние заказа меняется на «Оплачено».  
- Пользователю отображается сообщение об успешной оплате.  
- На e-mail пользователя приходит чек.  

ID: TC02  
Название: Оплата отклонена банком  
Предусловия:  
- Как в TC01.  
- Шлюз настроен на возвращение «Отклонено банком».  
Шаги:  
1. Открыть страницу оплаты.  
2. Ввести валидные тестовые данные карты.  
3. Нажать «Оплатить».  
Ожидаемый результат:  
- Платёжный шлюз возвращает «Отклонено банком».  
- В приложении статус заказа «Оплата не прошла».  
- Пользователю показывается сообщение «Платёж отклонён банком».  
- Чек на e-mail не отправляется.  

ID: TC03  
Название: Обработка ошибки платёжного сервиса  
Предусловия:  
- Как в TC01.  
- Шлюз настроен на возвращение «Ошибка платёжного сервиса» (timeout, 500).  
Шаги:  
1. Открыть страницу оплаты.  
2. Ввести валидные данные.  
3. Нажать «Оплатить».  
Ожидаемый результат:  
- При получении ошибки шлюза приложение показывает «Сервис недоступен, попробуйте позже».  
- Статус заказа «Ошибка оплаты».  
- Чек не отправляется.  

ID: TC04  
Название: Граничное значение – номер карты из 19 цифр  
Предусловия:  
- Как в TC01.  
- Шлюз возвращает «Успешно».  
Шаги:  
1. Открыть форму оплаты.  
2. Ввести 19-значный валидный номер (например, 1234 5678 9012 3456 789).  
3. Заполнить остальные поля корректно.  
4. Нажать «Оплатить».  
Ожидаемый результат:  
- Клиентская валидация допускает 19 цифр.  
- Платёж проходит успешно.  
- Статус заказа «Оплачено», чек отправлен.  

ID: TC05  
Название: Валидация – некорректный формат полей  
Предусловия:  
- Пользователь на странице оплаты.  
Шаги:  
1. Ввести в поле «Номер карты» буквы и спецсимволы.  
2. В поле «Срок» указать «13/99».  
3. В поле CVC ввести «12a».  
4. Нажать «Оплатить».  
Ожидаемый результат:  
- Под каждым полем появляются сообщения:  
  • Номер карты — «Допускаются только цифры, от 13 до 19 знаков».  
  • Срок — «Неверный формат MM/YY».  
  • CVC — «Только 3 цифры».  
- Запрос в шлюз не отправляется.  

ID: TC06  
Название: Валидация – обязательные поля пустые  
Предусловия:  
- Пользователь на форме оплаты.  
Шаги:  
1. Оставить все поля пустыми.  
2. Нажать «Оплатить».  
Ожидаемый результат:  
- Для каждого поля выводится «Обязательное поле».  
- Дальнейшей отправки не происходит.  

ID: TC07  
Название: Платёж с 3-D Secure (редирект и успех)  
Предусловия:  
- Как в TC01.  
- Шлюз настроен на прохождение 3-D Secure и последующий успех.  
Шаги:  
1. Ввести валидную карту, по которой требуется 3-D Secure.  
2. Нажать «Оплатить».  
3. Дождаться редиректа на страницу ACS.  
4. Ввести корректный пароль / код.  
5. Подтвердить аутентификацию.  
Ожидаемый результат:  
- Пользователь перенаправлен на ACS.  
- После успешного 3-D Secure возвращается в магазин.  
- Статус заказа «Оплачено», чек выслан.  
- На экране отображена страница «Платёж успешно завершён».  

ID: TC08  
Название: Проверка интеграции – структура и содержимое запроса к шлюзу  
Предусловия:  
- Настроен перехват HTTP-запросов к тестовому шлюзу.  
- Пользователь готов к оплате.  
Шаги:  
1. Заполнить форму валидными данными.  
2. Нажать «Оплатить».  
3. Перехватить и проанализировать HTTP-запрос к шлюзу.  
Ожидаемый результат:  
- В теле запроса присутствуют поля: cardnumber, expmonth, expyear, cvc, amount, currency, orderid.  
- Значения полей соответствуют введённым.
- Заголовки Authorization и Content-Type: application/json.  
- Корректная обработка ответа (успех/отказ/ошибка) в приложении.
